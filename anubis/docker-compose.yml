networks:
  web:
    external: true

x-anubis-base: &anubis-base
  image: ghcr.io/techarohq/anubis:latest
  environment: &anubis-env
    BIND: ":8923"
    DIFFICULTY: "4"
    METRICS_BIND: ":9090"
    SERVE_ROBOTS_TXT: "false"
  volumes:
    - /home/ubuntu/anubis/botPolicy.json:/data/cfg/botPolicy.json:ro
  user: "1000:1000"
  networks:
      - web

services:
  anubis-redlib:
    container_name: anubis-redlib
    <<: *anubis-base
    environment:
      <<: *anubis-env
      TARGET: "http://redlib:8080"
  anubis-librechat:
    container_name: anubis-rimgo
    <<: *anubis-base
    environment:
      <<: *anubis-env
      TARGET: "http://rimgo:3000"
